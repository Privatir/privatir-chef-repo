# sitt-cookbooks/app-nginx/templates/dev.erb

server {
  listen 80;
  server_name <%= @ip %> <%= @domain %>;
  access_log /var/log/nginx.access.log;
  error_log /var/log/nginx.error.log info;
  client_max_body_size 64M;
  keepalive_timeout 10;
  root <%=@project_dir%>/current/public; 
  index index.html;
  
  passenger_enabled on;
  passenger_app_root <%=@project_dir%>/current;
  rails_env <%=@environment%>;

  location / {
    gzip_static off;
  }
  location ~* \.(?:manifest|appcache|html?|json)$ {
    expires -1;
  }
  location ~* \.(?:css|js)$ {
    try_files $uri =404;
    expires 1y;
    access_log off;
    add_header Cache-Control "public";
  }
  location ~* \.(?:jpg|jpeg|gif|png|ico|bmp|swf|txt|svg|ttf|woff)$ {
    try_files $uri =404;
    access_log off;
    expires max;
  }
}